
configurable number of tty line disciplines


 include/linux/tty.h |    2 	1 +	1 -	0 !
 init/Kconfig        |    8 	8 +	0 -	0 !
 2 files changed, 9 insertions(+), 1 deletion(-)

Index: linux-2.6.23-rc9/include/linux/tty.h
===================================================================
--- linux-2.6.23-rc9.orig/include/linux/tty.h	2007-10-08 23:51:25.000000000 +0200
+++ linux-2.6.23-rc9/include/linux/tty.h	2007-10-09 00:29:04.000000000 +0200
@@ -24,7 +24,7 @@
 #define NR_PTYS	CONFIG_LEGACY_PTY_COUNT   /* Number of legacy ptys */
 #define NR_UNIX98_PTY_DEFAULT	4096      /* Default maximum for Unix98 ptys */
 #define NR_UNIX98_PTY_MAX	(1 << MINORBITS) /* Absolute limit */
-#define NR_LDISCS		17
+#define NR_LDISCS		CONFIG_NR_LDISCS
 
 /* line disciplines */
 #define N_TTY		0
Index: linux-2.6.23-rc9/init/Kconfig
===================================================================
--- linux-2.6.23-rc9.orig/init/Kconfig	2007-10-09 00:29:04.000000000 +0200
+++ linux-2.6.23-rc9/init/Kconfig	2007-10-09 00:29:41.000000000 +0200
@@ -744,6 +744,14 @@
 	help
 	  Select the maximum number of swapfiles (5 for default).
 
+config NR_LDISCS
+	int "Number of tty line disciplines" if EMBEDDED
+	range 0 16
+	default 16
+	help
+	  Select the maximum number of tty line disciplines. Embedded systems
+          can probably get by with only a few of these.
+
 endmenu		# General setup
 
 config RT_MUTEXES
