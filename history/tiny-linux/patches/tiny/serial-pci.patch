
Configurable support for PCI serial devices


 drivers/serial/Makefile |    2 	1 +	1 -	0 !
 init/Kconfig            |    9 	9 +	0 -	0 !
 2 files changed, 10 insertions(+), 1 deletion(-)

Index: linux-2.6.23-rc9/drivers/serial/Makefile
===================================================================
--- linux-2.6.23-rc9.orig/drivers/serial/Makefile	2007-10-08 23:51:16.000000000 +0200
+++ linux-2.6.23-rc9/drivers/serial/Makefile	2007-10-09 00:29:04.000000000 +0200
@@ -9,7 +9,7 @@
 obj-$(CONFIG_SERIAL_8250) += 8250.o
 obj-$(CONFIG_SERIAL_8250_PNP) += 8250_pnp.o
 obj-$(CONFIG_SERIAL_8250_GSC) += 8250_gsc.o
-obj-$(CONFIG_SERIAL_8250_PCI) += 8250_pci.o
+obj-$(CONFIG_SERIAL_PCI) += 8250_pci.o
 obj-$(CONFIG_SERIAL_8250_HP300) += 8250_hp300.o
 obj-$(CONFIG_SERIAL_8250_CS) += serial_cs.o
 obj-$(CONFIG_SERIAL_8250_ACORN) += 8250_acorn.o
Index: linux-2.6.23-rc9/init/Kconfig
===================================================================
--- linux-2.6.23-rc9.orig/init/Kconfig	2007-10-09 00:29:04.000000000 +0200
+++ linux-2.6.23-rc9/init/Kconfig	2007-10-09 00:29:34.000000000 +0200
@@ -768,6 +768,15 @@
 	  Select the maximum number of IDE interfaces (0 for default).
           Saves up to 14k.
 
+config SERIAL_PCI
+	depends PCI && SERIAL_8250
+	default y
+	bool "Enable standard PCI serial support" if EMBEDDED
+	help
+	  This builds standard PCI serial support. You may be able to disable
+          this feature if you are only need legacy serial support.
+	  Saves about 9K.
+
 endmenu		# General setup
 
 config RT_MUTEXES
