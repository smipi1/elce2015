
CONFIG_NET_SMALL reduce rpc hash size


 net/sunrpc/cache.c |    5 	5 +	0 -	0 !
 1 files changed, 5 insertions(+)

Index: linux-2.6.23-rc9/net/sunrpc/cache.c
===================================================================
--- linux-2.6.23-rc9.orig/net/sunrpc/cache.c	2007-10-08 23:51:25.000000000 +0200
+++ linux-2.6.23-rc9/net/sunrpc/cache.c	2007-10-08 23:52:27.000000000 +0200
@@ -515,7 +515,12 @@
  * it to be revisited when cache info is available
  */
 
+#ifdef CONFIG_NET_SMALL
+#define	DFR_HASHSIZE	(512/sizeof(struct list_head))
+#else
 #define	DFR_HASHSIZE	(PAGE_SIZE/sizeof(struct list_head))
+#endif
+
 #define	DFR_HASH(item)	((((long)item)>>4 ^ (((long)item)>>13)) % DFR_HASHSIZE)
 
 #define	DFR_MAX	300	/* ??? */
