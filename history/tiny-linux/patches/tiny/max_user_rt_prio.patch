
Configurable number of RT priority O(1) scheduling queues


 include/linux/sched.h |    2 	1 +	1 -	0 !
 init/Kconfig          |    7 	7 +	0 -	0 !
 2 files changed, 8 insertions(+), 1 deletion(-)

Index: linux-2.6.23-rc9/include/linux/sched.h
===================================================================
--- linux-2.6.23-rc9.orig/include/linux/sched.h	2007-10-08 23:51:25.000000000 +0200
+++ linux-2.6.23-rc9/include/linux/sched.h	2007-10-09 00:29:04.000000000 +0200
@@ -1210,7 +1210,7 @@
  * MAX_RT_PRIO must not be smaller than MAX_USER_RT_PRIO.
  */
 
-#define MAX_USER_RT_PRIO	100
+#define MAX_USER_RT_PRIO	CONFIG_MAX_USER_RT_PRIO
 #define MAX_RT_PRIO		MAX_USER_RT_PRIO
 
 #define MAX_PRIO		(MAX_RT_PRIO + 40)
Index: linux-2.6.23-rc9/init/Kconfig
===================================================================
--- linux-2.6.23-rc9.orig/init/Kconfig	2007-10-09 00:29:04.000000000 +0200
+++ linux-2.6.23-rc9/init/Kconfig	2007-10-09 00:29:39.000000000 +0200
@@ -752,6 +752,13 @@
 	  Select the maximum number of tty line disciplines. Embedded systems
           can probably get by with only a few of these.
 
+config MAX_USER_RT_PRIO
+	int "Number of realtime priority levels" if EMBEDDED
+	range 5 100
+	default 100
+	help
+	  This option allows reducing the size of the O(1) scheduler arrays.
+
 endmenu		# General setup
 
 config RT_MUTEXES
